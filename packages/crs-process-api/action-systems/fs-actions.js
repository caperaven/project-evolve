class f{static async perform(e,t,a,s){await this[e.action](e,t,a,s)}static async select_folder(e,t,a,s){}static async create_folder(e,t,a,s){}static async select_file(e,t,a,s){let i;return[i]=await window.showOpenFilePicker(),i}static async read_file(e,t,a,s){return await(await(await crs.process.getValue(e.args?.handle,t,a,s)||await this.select_file(e,t,a,s)).getFile()).text()}static async read_json(e,t,a,s){const i=await this.read_file(e,t,a,s);return JSON.parse(i)}static async save_file(e,t,a,s){const i=await crs.process.getValue(e.args.handle,t,a,s),n=await crs.process.getValue(e.args.content,t,a,s);await o(i,n)}static async write_new_file(e,t,a,s){const i=await crs.process.getValue(e.args.file_types,t,a,s),n=await crs.process.getValue(e.args.default_name,t,a,s),c=await w(i,n),l=await crs.process.getValue(e.args.content,t,a,s);return await o(c,l),c}static async write_new_json(e,t,a,s){const i=await crs.process.getValue(e.args.content,t,a,s),l=await w([{description:"JSON Files",accept:{"text/json":[".json"]}}],"untitled.json");return await o(l,JSON.stringify(i,null,"	")),l}static async open_folder(e,t,a,s){const n=await crs.process.getValue(e.args?.handle,t,a,s)||await window.showDirectoryPicker();await u(n,!0);const c=[];for await(const l of n.values())c.push(l);return c}}async function o(r,e){typeof e=="object"&&(e=JSON.stringify(e,null,4));const t=await r.createWritable();await t.write(e),await t.close()}async function w(r,e){const t={suggestedName:e||"Untitled.txt",types:r||[]};return await window.showSaveFilePicker(t)}async function u(r,e){const t={};return e&&(t.mode="readwrite"),await r.queryPermission(t)==="granted"||await r.requestPermission(t)==="granted"}crs.intent.fs=f;export{f as FsActions};
